A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     1


MACRO ASSEMBLER A51 V7.08a
OBJECT MODULE PLACED IN .\output\uvc_cdc.obj
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE ..\..\phase2\cypress\fw\uvc_cdc.a51 SET(SMALL) DEBUG PRINT(.\output\uvc_cd
                      c.lst) OBJECT(.\output\uvc_cdc.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ;;-----------------------------------------------------------------------------
                       2     ;;   File:      dscr.a51
                       3     ;;   Contents:  This file contains descriptor data tables.
                       4     ;;
                       5     ;; $Archive: /USB/Examples/FX2LP/hid_kb/dscr.a51 $
                       6     ;; $Date: 5/27/04 1:25p $
                       7     ;; $Revision: 2 $
                       8     ;;
                       9     ;;
                      10     ;;-----------------------------------------------------------------------------
                      11     ;; Copyright 2003, Cypress Semiconductor Corporation
                      12     ;;-----------------------------------------------------------------------------
                      13     ;;-----------------------------------------------------------------------------
                      14        
  0001                15     DSCR_DEVICE   equ   1   ;; Descriptor type: Device
  0002                16     DSCR_CONFIG   equ   2   ;; Descriptor type: Configuration
  0003                17     DSCR_STRING   equ   3   ;; Descriptor type: String
  0004                18     DSCR_INTRFC   equ   4   ;; Descriptor type: Interface
  0005                19     DSCR_ENDPNT   equ   5   ;; Descriptor type: Endpoint
  0006                20     DSCR_DEVQUAL  equ   6   ;; Descriptor type: Device Qualifier
                      21     
  0012                22     DSCR_DEVICE_LEN   equ   18
  0009                23     DSCR_CONFIG_LEN   equ    9
  0009                24     DSCR_INTRFC_LEN   equ    9
  0007                25     DSCR_ENDPNT_LEN   equ    7
  000A                26     DSCR_DEVQUAL_LEN  equ   10
                      27     
  0000                28     ET_CONTROL   equ   0   ;; Endpoint type: Control
  0001                29     ET_ISO       equ   1   ;; Endpoint type: Isochronous
  0002                30     ET_BULK      equ   2   ;; Endpoint type: Bulk
  0003                31     ET_INT       equ   3   ;; Endpoint type: Interrupt
                      32     
                      33     public       DeviceDscr, DeviceQualDscr, HighSpeedConfigDscr, FullSpeedConfigDscr, StringDs
                             cr,UserDscr
                      34     ; public                VSUserDscrEnd
                      35     public          CSInterfaceDscr,CSInterfaceDscrEND,CSVSInterfaceDscr,CSVSInterfaceDscrEND
                      36     
                      37     DSCR   SEGMENT   CODE PAGE
                      38     
                      39     ;;-----------------------------------------------------------------------------
                      40     ;; Global Variables
                      41     ;;-----------------------------------------------------------------------------
----                  42           rseg DSCR      ;; locate the descriptor table in on-part memory.
                      43     
0000                  44     DeviceDscr:   
                      45     
0000 12               46     db      12H     ; 0 bLength 1 Descriptor size in bytes (12h)
0001 01               47     db      01H     ; 1 bDescriptorType 1 The constant DEVICE (01h)
0002 00               48     db      00H; 2 bcdUSB 2 USB specification release number (BCD)
0003 02               49     db      02H; 2 bcdUSB 2 USB specification release number (BCD)
0004 EF               50     db      0EFH; 4 bDeviceClass 1 Class code
0005 02               51     db      02H; 5 bDeviceSubclass 1 Subclass code
0006 01               52     db      01H; 6 bDeviceProtocol 1 Protocol Code
0007 40               53     db  64 ; 7 bMaxPacketSize0 1 Maximum packet size for endpoint zero
0008 9AFB             54     dw  9AFBH; 8 idVendor 2 Vendor ID
000A 9AFB             55     dw  9AFBH; 10 idProduct 2 Product ID
000C 0100             56     dw  0100H; 12 bcdDevice 2 Device release number (BCD)
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     2

000E 02               57     db      02H; 14 iManufacturer 1 Index of string descriptor for the manufacturer
000F 01               58     db      01H; 15 iProduct 1 Index of string descriptor for the product
0010 00               59     db      00H; 16 iSerialNumber 1 Index of string descriptor for the serial number
0011 01               60     db      01H; 17 bNumConfigurations 1 Number of possible configurations 
                      61     
                      62     
0012                  63     DeviceQualDscr:
                      64     
0012 0A               65     db   0AH        ; 0 bLength 1 Descriptor size in bytes (0Ah)
0013 06               66     db   06H; 1 bDescriptorType 1 The constant DEVICE_QUALIFIER (06h)
0014 00               67     db   00H
0015 02               68     db   02H ; 2 bcdUSB 2 USB specification release number (BCD)
0016 EF               69     db   0EFH ; 4 bDeviceClass 1 Class code
0017 02               70     db   02H ; 5 bDeviceSubclass 1 Subclass code
0018 01               71     db   01H ; 6 bDeviceProtocol 1 Protocol Code
0019 40               72     db   40H ; 7 bMaxPacketSize0 1 Maximum packet size for endpoint zero
001A 01               73     db   01H ; 8 bNumConfigurations 1 Number of possible configurations
001B 00               74     db   00H; 9 Reserved 1 For future use
                      75     
001C                  76     HighSpeedConfigDscr:  
                      77     ;;;;; configuration descriptor (Standard)
001C 09               78     db      09H ; 0 bLength 1 Descriptor size in bytes (09h)
001D 02               79     db      02H ; 1 bDescriptorType 1 The constant CONFIGURATION (02h)
001E D8               80     db  (HighSpeedConfigDscrEnd-HighSpeedConfigDscr) mod 256 ;; Total Length (LSB)
001F 00               81     db  (HighSpeedConfigDscrEnd-HighSpeedConfigDscr)  /  256 ;; Total Length (MSB); 2 wTotalLen
                             gth 2 The number of bytes in the configuration descriptor and all of its subordinate descriptors
0020 04               82     db      04H; 4 bNumInterfaces 1 Number of interfaces in the configuration (will be chaneged
                              when CDC is merged in it ) at the moment 2 interfaces 1 control and 1 streaming
0021 01               83     db      01H; 5 bConfigurationValue 1 Identifier for Set Configuration and GetConfiguration 
                             requests
0022 00               84     db      00H; 6 iConfiguration 1 Index of string descriptor for the configuration
0023 80               85     db      80H; 7 bmAttributes 1 Self/bus power and remote wakeup settings
0024 FA               86     db      0FAH; 8 bMaxPower 1 Bus power required in units of 2 mA (USB 2.0) or 8mA (SuperSpee
                             d).
                      87     
                      88     ;------------------------------------------
                      89     
                      90     ;;;;Interfae association descriptor
0025 08               91     db      08H; 0 bLength 1 Descriptor size in bytes (08h)
0026 0B               92     db      0BH; 1 bDescriptorType 1 The constant Interface Association (0Bh)
0027 00               93     db      00H; 2 bFirstInterface 1 Number identifying the first interface associated with the
                              function
0028 02               94     db      02H ; 3 bInterfaceCount 1 The number of contiguous interfaces associated with the f
                             unction 
0029 0E               95     db      0EH; 4 bFunctionClass 1 Class code
002A 03               96     db      03H; 5 bFunctionSubClass 1 Subclass code
002B 00               97     db      00H; 6 bFunctionProtocol 1 Protocol code
002C 00               98     db      00H; 8 iFunction 1 Index of string descriptor for the function
                      99     
                     100     ;------------------------------------------
                     101     
                     102     ; The interface descriptor (standerd)
002D 09              103     db      09H; 0 bLength 1 Descriptor size in bytes (09h)
002E 04              104     db      04H; 1 bDescriptorType 1 The constant Interface (04h)
002F 00              105     db      00H; 2 bInterfaceNumber 1 Number identifying this interface
0030 00              106     db      00H; 3 bAlternateSetting 1 A number that identifies a descriptor with alternate set
                             tings for this bInterfaceNumber.
0031 00              107     db      00H; 4 bNumEndpoints 1 Number of endpoints used by this interface (excluding endpoi
                             nt 0). This number is 0 or 1 depending on whether the optional status interrupt endpoint is present.
0032 0E              108     db      0EH; 5 bInterfaceClass 1 Class code 
0033 01              109     db      01H; 6 bInterfaceSubclass 1 Subclass code
0034 01              110     db      01H; 7 bInterfaceProtocol 1 Protocol code
0035 00              111     db      00H; 8 iInterface 1 Index of string descriptor for the interface
                     112     
                     113     ;------------------------------------------
0036                 114     CSInterfaceDscr:
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     3

                     115     ; calss specific interface descriptor
0036 0D              116     db  0DH; bLength        1       Number  Size of this descriptor, in bytes: 12+n 
0037 24              117     db      24H; bDescriptorType    1       Constant        CS_INTERFACE descriptor type 
0038 01              118     db      01H; bDescriptorSubType         1       Constant        VC_HEADER descriptor subtyp
                             e 
0039 05              119     db  05H 
003A 01              120     db  01H  ; bcdUVC       2       BCD     Video Device Class Specification release number in 
                             binary-coded decimal. (i.e. 2.10 is 210H and 1.50 is 150H) 
003B 1E              121     db  (CSInterfaceDscrEnd-CSInterfaceDscr) mod 256 ;; Total Length (LSB)
003C 00              122     db  (CSInterfaceDscrEnd-CSInterfaceDscr)  /  256 ;; Total Length (MSB);; wTotalLength   2  
                                  Number  Total number of bytes returned for the class-specific VideoControl interface d
                             escriptor. Includes the combined length of this descriptor header and all Unit and Terminal descriptors. 
003D 80              123     db     80H 
003E C3              124     db     0C3H 
003F C9              125     db     0C9H 
0040 01              126     db     01H  ; dwClockFrequency  4       Number  Use of this field has been deprecated. The 
                             device clock frequency in Hz. This will specify the units used for the time information fields in the Video 
                     127     ;Payload Headers of the primary data stream and format.  The dwClockFrequency field of the 
                             Video Probe and Commit control replaces this descriptor field. A value for this field shall be chosen such 
                     128     ;that the primary or default function of the device will be available to host software that
                              implements Version 1.0 of this specification. 
0041 01              129     db     01H  ; bInCollection     1       Number  The number of VideoStreaming interfaces in 
                             the Video Interface Collection to which this VideoControl interface belongs: n 
0042 01              130     db     01H; baInterfaceNr(1)    1       Number  Interface number of the first  VideoStreami
                             ng interface in the Collection 
                     131     
                     132     
                     133     ;------------------------------------------
                     134     
                     135     ; Input terminal desciptor
0043 08              136     db      08H; 0  bLength  1  Number  Size of this descriptor, in bytes: 8 (+ x)
0044 24              137     db      24H; 1  bDescriptorType  1  Constant  CS_INTERFACE descriptor type
0045 02              138     db      02H; 2  bDescriptorSubtype  1  Constant  VC_INPUT_TERMINAL descriptor subtype
0046 01              139     db      01H; 3  bTerminalID  1  Constant  A non-zero constant that uniquely identifies  the
                              Terminal within the video function. This  value is used in all requests to address this  Terminal.
0047 00              140     db      00H
0048 02              141     db      02H; 4  wTerminalType  2  Constant  Constant that characterizes the type of  Termin
                             al. See Appendix B, "Terminal Types".
0049 00              142     db      00H; 6  bAssocTerminal  1  Constant  ID of the Output Terminal to which this Input 
                              Terminal is associated, or zero (0) if no such  association exists.
004A 00              143     db      00H; 7  iTerminal  1  Index  Index of a string descriptor, describing the Input Ter
                             minal.
                     144     ; …  …  …  …  Depending on the Terminal type, certain Input  Terminal descriptors have addi
                             tional fields.  The descriptors for these special Terminal  types are described in separate sections  
                     145     ;specific to those Terminals, and in  accompanying documents.
                     146     
                     147     ;------------------------------------------
                     148     
                     149     ; output terminal descriptor
004B 09              150     db      09H; 0  bLength  1  Number  Size of this descriptor, in bytes: 9 (+ x)
004C 24              151     db      24H; 1  bDescriptorType  1  Constant  CS_INTERFACE descriptor type
004D 03              152     db      03H; 2  bDescriptorSubtype  1  Constant  VC_OUTPUT_TERMINAL descriptor  subtype
004E 02              153     db      02H; 3  bTerminalID  1  Constant  A non-zero constant that uniquely identifies the 
                             Terminal within the video function. This value is used in all requests to address this  Terminal.
004F 01              154     db      01H
0050 01              155     db      01H; 4  wTerminalType  2  Constant  Constant that characterizes the type of Termina
                             l. See Appendix B, "Terminal  Types".
0051 00              156     db      00H; 6  bAssocTerminal  1  Constant  Constant, identifying the Input Terminal to  w
                             hich this Output Terminal is associated, or  zero (0) if no such association exists.
0052 01              157     db      01H; 7  bSourceID  1  Constant  ID of the Unit or Terminal to which this Terminal i
                             s connected.
0053 00              158     db      00H; 8  iTerminal  1  Index  Index of a string descriptor, describing the  Output T
                             erminal.
                     159     ; …  …  …  …  Depending on the Terminal type, certain  Output Terminal descriptors have add
                             itional  fields. The descriptors for these special  Terminal types are described in  accompanying documents.
0054                 160     CSInterfaceDscrEND:
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     4

                     161     
                     162     
                     163     ;------------------------------------------
                     164     ;====================================================
                     165     ; VS Interface Descriptor (Standard)
0054 09              166     db      09H; 0  bLength  1  Number  Size of this descriptor, in bytes: 9
0055 04              167     db      04H; 1  bDescriptorType  1  Constant  INTERFACE descriptor type
0056 01              168     db      01H; 2  bInterfaceNumber  1  Number  Number of the interface. A zero-based value  i
                             dentifying the index in the array of concurrent  interfaces supported by this configuration.
0057 00              169     db      00H; 3  bAlternateSetting  1  Number  Value used to select this alternate setting f
                             or  the interface identified in the prior field.
0058 00              170     db      00H; 4  bNumEndpoints  1  Number  Number of endpoints used by this interface  (excl
                             uding endpoint 0).
0059 0E              171     db      0EH; 5  bInterfaceClass  1  Class  CC_VIDEO. Video Interface Class code  (assigned 
                             by the USB). See section A.1,  "Video Interface Class Code".
005A 02              172     db      02H; 6  bInterfaceSubClass  1  subclass  SC_VIDEOSTREAMING. Video interface  subcla
                             ss code (assigned by this specification).  See section A.2, "Video Interface Subclass  Codes".
005B 01              173     db      1; 7  bInterfaceProtocol  1  Protocol  Must be set to PC_PROTOCOL_15. according to 
                             specs should be 1 but every example i looked its value is 0
005C 00              174     db      00H; 8  iInterface  1  Index  Index of a string descriptor that describes this  int
                             erface.
                     175     
                     176     ;------------------------------------------
005D                 177     CSVSInterfaceDscr:
                     178     ; VS Interface Descriptors (Class-Specific)
005D 0E              179     db      0EH; 0 bLength 1 Number Size of this descriptor, in bytes: 13+(p*n.
005E 24              180     db      24H; 1 bDescriptorType 1 Constant CS_INTERFACE descriptor type
005F 01              181     db      01H; 2 bDescriptorSubtype 1 Constant VS_INPUT_HEADER descriptor subtype
0060 01              182     db      01H; 3 bNumFormats 1 Number Number of video payload Format descriptors following fo
                             r this interface (excluding video Frame descriptors): p
0061 19              183     db  (CSVSInterfaceDscrEnd-CSVSInterfaceDscr) mod 256 ;; Total Length (LSB)
0062 00              184     db  (CSVSInterfaceDscrEnd-CSVSInterfaceDscr)  /  256 ;; Total Length (MSB); 4 wTotalLength 
                             2 Number Total number of bytes returned for the class-specific VideoStreaming interface des
                             criptors including this header descriptor.
0063 82              185     db      82H; 6 bEndpointAddress 1 Endpoint The address of the isochronous or bulk endpoint 
                             used for video data. The address is encoded as follows: D7: Direction 1 = IN endpoint D6..4
                             : Reserved, set to zero. D3..0: The endpoint number, determined by the designer. (endpoint 2)
0064 00              186     db      00H; 7 bmInfo 1 Bitmap Indicates the capabilities of this VideoStreaming interface:
                              D0: Dynamic Format Change supported D7..1: Reserved, set to zero.
0065 02              187     db      02H; 8 bTerminalLink 1 Constant The terminal ID of the Output Terminal to which the
                              video endpoint of this interface is connected.
0066 00              188     db      00H; 9 bStillCaptureMethod 1 Number Method of still image capture supported as desc
                             ribed in section 2.4.2.4, "Still Image Capture": 0: None (Host software will not support an
                             y form of still image capture) 1: Method 1 2: Method 2 3: Method 3
0067 00              189     db      00H; 10 bTriggerSupport 1 Number Specifies if hardware triggering is supported thro
                             ugh this interface 0: Not supported 1: Supported
0068 00              190     db      00H; 11 bTriggerUsage 1 Number Specifies how the host software shall respond to a h
                             ardware trigger interrupt event from this interface. This is ignored if the bTriggerSupport field is zero. 0: 
                     191     ;Initiate still image capture 1: General purpose button event. Host driver will notify clie
                             nt application of button press and button release events
0069 01              192     db      01H; 12  bControlSize  1  Number  Size of each bmaControls(x) field, in  bytes: n
006A 00              193     db      00H; 13  bmaControls(1)  n  Bitmap  For bits D3..0, a bit set to 1 indicates that  
                             the named field is supported by the Video  Probe and Commit Control when  bFormatIndex is 1: D0: wKeyFrameRate 
                     194     ;D1: wPFrameRate D2: wCompQuality D3: wCompWindowSize For bits D5..4, a bit set to 1 indica
                             tes that  the named control is supported by the  device when bFormatIndex is 1: D4: Generate Key Frame D5: 
                     195     ;Update Frame Segment D6..(n*8-1): Reserved, set to zero *Note* going forward from version 
                             1.5 the  proper means to detect whether a field is  supported by Probe & Commit is to issue a  
                     196     ;VS_PROBE_CONTROL(GET_CUR).
                     197     ; :
                     198     ; :
                     199     ; :
                     200     ; 13+(p*n-n) bmaControls(p)  n  Bitmap  For bits D3..0, a bit set to 1 indicates that  the 
                             named field is supported by the Video  Probe and Commit Control when bFormatIndex is p: D0: wKeyFrameRate 
                     201     ;D1: wPFrameRate D2: wCompQuality D3: wCompWindowSize For bits D5..4, a bit set to 1 indica
                             tes that  the named control is supported by the  device when bFormatIndex is p: D4: Generate Key Frame D5: 
                     202     ;Update Frame Segment D6..(n*8-1): Reserved, set to zero *Note* D0-D3 are deprecated. Going
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     5

                               forward from version 1.5 the proper means  to detect whether a field is supported by  Probe & Commit is 
                     203     ;to issue a  VS_PROBE_CONTROL(GET_CUR).
                     204     
                     205     ;-------------------------------
                     206     
                     207     ; Motion-JPEG Video Format Descriptor
006B 0B              208     db      0BH; 0  bLength  1  Number  Size of this Descriptor, in bytes: 11
006C 24              209     db      24H; 1  bDescriptorType  1  Constant  CS_INTERFACE Descriptor type.
006D 06              210     db      06H; 2  bDescriptorSubtype  1  Constant  VS_FORMAT_MJPEG Descriptor  subtype
006E 01              211     db      01H; 3  bFormatIndex  1  Number  Index of this Format Descriptor
006F 01              212     db      01H; 4  bNumFrameDescriptors  1  Number  Number of Frame Descriptors  following tha
                             t correspond to this format
0070 01              213     db      01H; 5  bmFlags  1  Number  Specifies characteristics of this format D0: FixedSizeS
                             amples. 1 = Yes All other bits are reserved for future  use and shall be reset to zero.
0071 01              214     db      01H; 6  bDefaultFrameIndex  1  Number  Optimum Frame Index (used to select  resolut
                             ion) for this stream
0072 00              215     db      00H; 7  bAspectRatioX  1  Number  The X dimension of the picture aspect  ratio.
0073 00              216     db      00H; 8  bAspectRatioY  1  Number  The Y dimension of the picture aspect  ratio.
0074 00              217     db      00H; 9  bmInterlaceFlags  1  Bitmap  Specifies interlace information. If the  scann
                             ing mode control in the Camera  Terminal is supported for this stream, this field should reflect the field 
                     218     ;format  used in interlaced mode. (Top field in PAL is field 1, top field in  NTSC is field
                              2.): D0: Interlaced stream or variable. 1 =Yes D1: Fields per frame. 0= 2 fields, 1 = 1  field D2: Field 1 
                     219     ;first. 1 = Yes D3: Reserved D5..4: Field pattern 00 = Field 1 only  01 = Field 2 only 10 =
                              Regular pattern of fields 1 and 2 11 = Random pattern of fields 1 and 2 D7..6: Reserved. Do not use.
0075 00              220     db      00H; 10  bCopyProtect  1  Boolean  Specifies if duplication of the video  stream sh
                             ould be restricted: 0: No restrictions 1: Restrict duplication
                     221     
                     222     
0076                 223     CSVSInterfaceDscrEND:
                     224     ;-------------------------------
                     225     
                     226     ; Motion-JPEG Video Frame Descriptor
0076 26              227     db      26H;0  bLength  1  Number  Size of this descriptor in bytes when  bFrameIntervalTyp
                             e is 0: 38 Size of this descriptor in bytes when  bFrameIntervalType > 0: 26+(4*n)
0077 24              228     db      24H; 1  bDescriptorType  1  Constant  CS_INTERFACE Descriptor type
0078 07              229     db      07H; 2  bDescriptorSubtype  1  Constant  VS_FRAME_MJPEG Descriptor  subtype
0079 01              230     db      01H; 3  bFrameIndex  1  Number  Index of this Frame Descriptor
007A 02              231     db      02H; 4  bmCapabilities  1  Number  D0: Still image supported Specifies whether stil
                             l images are  supported at this frame setting. This is only applicable for VS interfaces with  an IN video 
                     232     ;endpoint using Still  Image Capture Method 1, and should  be set to 0 in all other cases. 
                             D1: Fixed frame-rate Specifies whether the device provides  a fixed frame rate on a stream  associated with 
                     233     ;this frame descriptor.  Set to 1 if fixed rate is enabled;  otherwise, set to 0. D7..2: Re
                             served, set to 0.
007B B0              234     db      0B0H
007C 00              235     db      00H; 5  wWidth  2  Number  Width of decoded bitmap frame in  pixels (176)
                     236     
007D 90              237     db      90H
007E 00              238     db      00H; 7  wHeight  2  Number  Height of decoded bitmap frame in  pixels (144)
                     239     
007F 00              240     db      00H
0080 EC              241     db      0ECH
0081 0D              242     db      0DH
0082 00              243     db      00H; 9  dwMinBitRate  4  Number  Specifies the minimum bit rate at  default compres
                             sion quality and longest frame interval in Units of bps at which the data can be transmitted.
                     244     
0083 00              245     db      00H
0084 EC              246     db      0ECH
0085 0D              247     db      0DH
0086 00              248     db      00H; 13  dwMaxBitRate  4  Number  Specifies the maximum bit rate at  default compre
                             ssion quality and shortest frame interval in Units of bps at which the data can be transmitted.
                     249     
0087 80              250     db      80H
0088 94              251     db      94H
0089 00              252     db      00H
008A 00              253     db      00H; 17  dwMaxVideoFrameBufferSize 4  Number  Use of this field has been deprecated
                             .Specifies the maximum number of bytes for a video (or still image) frame the compressor will produce.  The 
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     6

                     254     ;dwMaxVideoFrameSize field of the Video Probe and Commit control  replaces this descriptor 
                             field. A value for this field shall be chosen for  compatibility with host software that implements an 
                     255     ;earlier version of this specification.
                     256     
008B 2A              257     db      2AH
008C 2C              258     db      2CH
008D 0A              259     db      0AH
008E 00              260     db      00H; 21  dwDefaultFrameInterval  4  Number  Specifies the frame interval the device
                              would like to indicate for use as a default. This must be a valid frame interval described in the fields below.
                     261     
008F 00              262     db      00H; 25  bFrameIntervalType  1  Number  Indicates how the frame interval can be pro
                             grammed: 0: Continuous frame interval 1..255: The number of discrete frameintervals supported (n) ( i am using 
                     263     ;descrete frameinterval )
                     264     
0090 2A              265     db      2AH
0091 2C              266     db      2CH
0092 0A              267     db      0AH
0093 00              268     db      00H; 21  dwFrameInterval
                     269     
0094 2A              270     db      2AH
0095 2C              271     db      2CH
0096 0A              272     db      0AH
0097 00              273     db      00H
                     274     
0098 00              275     db      00H
0099 00              276     db      00H
009A 00              277     db      00H
009B 00              278     db      00H
                     279     
                     280     ;-----------------------
                     281     
                     282     ; Color Matching Descriptor
                     283     
009C 06              284     db      06H; 0  bLength  1  Constant  6
009D 24              285     db      24H; 1  bDescriptorType  1  Number  CS_INTERFACE type
009E 0D              286     db      0DH; 2  bDescriptorSubtype  1  Number  VS_COLORFORMAT
009F 00              287     db      00H; 3  bColorPrimaries  1  Number  This defines the color primaries  and the refer
                             ence white. 0: Unspecified (Image characteristics unknown) 1: BT.709, sRGB (default) 2: BT.470-2 (M) 3: 
                     288     ;BT.470-2 (B, G) 4: SMPTE 170M 5: SMPTE 240M 6-255: Reserved
00A0 00              289     db      00H; 4  bTransferCharacteristics  1  Number  This field defines the opto-electronic
                              transfer characteristic of  the source picture also called the  gamma function. 0: Unspecified (Image  
                     290     ;characteristics unknown)  1: BT.709 (default) 2: BT.470-2 M 3: BT.470-2 B, G 4: SMPTE 170M
                              5: SMPTE 240M 6: Linear (V = Lc) 7: sRGB (very similar to BT.709) 8-255: Reserved
00A1 00              291     db      00H; 5  bMatrixCoefficients  1  Number  Matrix used to compute luma and  chroma val
                             ues from the color  primaries. 0: Unspecified (Image  characteristics unknown) 1: BT. 709 2: FCC 3: BT.470-2 B, 
                     292     ;G 4: SMPTE 170M (BT.601,  default) 5: SMPTE 240M 6-255: Reserved
                     293     
                     294     ;;=====================
                     295     ; VS Interface Descriptor (Standard)
00A2 09              296     db      09H; 0  bLength  1  Number  Size of this descriptor, in bytes: 9
00A3 04              297     db      04H; 1  bDescriptorType  1  Constant  INTERFACE descriptor type
00A4 01              298     db      01H; 2  bInterfaceNumber  1  Number  Number of the interface. A zero-based value  i
                             dentifying the index in the array of concurrent  interfaces supported by this configuration.
00A5 01              299     db      01H; 3  bAlternateSetting  1  Number  Value used to select this alternate setting f
                             or  the interface identified in the prior field.
00A6 01              300     db      01H; 4  bNumEndpoints  1  Number  Number of endpoints used by this interface  (excl
                             uding endpoint 0).
00A7 0E              301     db      0EH; 5  bInterfaceClass  1  Class  CC_VIDEO. Video Interface Class code  (assigned 
                             by the USB). See section A.1,  "Video Interface Class Code".
00A8 02              302     db      02H; 6  bInterfaceSubClass  1  subclass  SC_VIDEOSTREAMING. Video interface  subcla
                             ss code (assigned by this specification).  See section A.2, "Video Interface Subclass  Codes".
00A9 01              303     db      01H; 7  bInterfaceProtocol  1  Protocol  Must be set to PC_PROTOCOL_15.
00AA 00              304     db      00H; 8  iInterface  1  Index  Index of a string descriptor that describes this  int
                             erface.
                     305     
                     306     
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     7

                     307     ;;=====================
                     308     
                     309     
                     310     
                     311     
                     312     ;------------------------
                     313     
                     314     ; endpoint descriptor (BULK)
00AB 07              315     db      07H; 0  bLength  1  Number  Size of this descriptor, in bytes: 7
00AC 05              316     db      DSCR_ENDPNT; 1  bDescriptorType  1  Constant  ENDPOINT descriptor type
00AD 88              317     db      88H; 2  bEndpointAddress  1  Endpoint  The address of the endpoint on the USB devic
                             e described by this descriptor. The  address is encoded as follows: D7: Direction 0 = OUT endpoint 1 = IN 
                     318     ;endpoint D6..4: Reserved, reset to zero D3..0: The endpoint number, determined by  the des
                             igner
00AE 02              319     db      ET_BULK; 3  bmAttributes  1  Bitmap  D1..0: Transfer type (set to 10 = Bulk) All ot
                             her bits are reserved.
                     320     
00AF 00              321     db      00H;
00B0 02              322     db      02H; 4  wMaxPacketSize  2  Number  Maximum packet size this endpoint is  capable of
                              sending or receiving when this  configuration is selected. (512 at the moment)
                     323     
00B1 01              324     db      01H; 6  bInterval  1  Number  Interval for polling endpoint for data  transfers. Fo
                             r high-speed bulk OUT endpoints, the  bInterval must specify the maximum NAK  rate of the endpoint. A value of 
                     325     ;0 indicates  the endpoint never NAKs. Other values  indicate at most 1 NAK each bInterval 
                             number of microframes. This value must be in the range from 0 to 255.
                     326     
                     327     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     328     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     329     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     330     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     331     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     332     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     333     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     334     ;------------------------------------------
                     335     
                     336     ;;;;Interfae association descriptor
00B2 08              337     db      08H; 0 bLength 1 Descriptor size in bytes (08h)
00B3 0B              338     db      0BH; 1 bDescriptorType 1 The constant Interface Association (0Bh)
00B4 02              339     db      02H; 2 bFirstInterface 1 Number identifying the first interface associated with the
                              function
00B5 02              340     db      02H ; 3 bInterfaceCount 1 The number of contiguous interfaces associated with the f
                             unction 
00B6 02              341     db      02H; 4 bFunctionClass 1 Class code
00B7 00              342     db      00H; 5 bFunctionSubClass 1 Subclass code
00B8 01              343     db      01H; 6 bFunctionProtocol 1 Protocol code
00B9 00              344     db      00H; 8 iFunction 1 Index of string descriptor for the function
                     345     
                     346     
                     347             ;-- 9 bytes interface descriptor (communication control class)
00BA 09              348           db   09H     ;; ",                 -- bLength = 9 bytes
00BB 04              349           db   04H     ;; ",                 -- bDescriptorType = interface descriptor
00BC 02              350           db   02H     ;; ",                 -- bInterfaceNumber = 0
00BD 00              351           db   00H     ;; ",                 -- bAlternateSetting = 0
00BE 01              352           db   01H     ;; ",                 -- bNumEndpoints = 1
00BF 02              353           db   02H     ;; ",                 -- bInterfaceClass = Communication Interface
00C0 02              354           db   02H     ;; ",                 -- bInterfaceSubClass = Abstract Control Model
00C1 01              355           db   01H     ;; ",                 -- bInterfaceProtocol = V.25ter (required for Linu
                             x CDC-ACM driver)
00C2 00              356           db   00H     ;; ",                 -- iInterface = none
                     357     
                     358            ; -- 5 bytes functional descriptor (header)
00C3 05              359           db   05H     ;; ",                 -- bLength = 5 bytes
00C4 24              360           db   24H     ;; ",                 -- bDescriptorType = CS_INTERFACE
00C5 00              361           db   00H     ;; ",                 -- bDescriptorSubtype = header
00C6 10              362           db   10H; ", 
00C7 01              363               db   01H     ;; ",          -- bcdCDC = 1.10
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     8

                     364           ;  -- 4 bytes functional descriptor (abstract control management)
00C8 04              365           db   04H     ;; ",                 -- bLength = 4 bytes
00C9 24              366           db   24H     ;; ",                 -- bDescriptorType = CS_INTERFACE
00CA 02              367           db   02H     ;; ",                 -- bDescriptorSubtype = Abstract Control Mgmnt
00CB 00              368           db   00H     ;; ",                 -- bmCapabilities = none
                     369          ;   -- 5 bytes functional descriptor (union)
00CC 05              370           db   05H     ;; ",                 -- bLength = 5 bytes
00CD 24              371           db   24H     ;; ",                 -- bDescriptorType = CS_INTERFACE
00CE 06              372           db   06H     ;; ",                 -- bDescriptorSubtype = union
00CF 02              373           db   02H     ;; ",                 -- bMasterInterface = 0
00D0 03              374           db   03H     ;; ",                 -- bSlaveInterface0 = 1
                     375           ;  -- 5 bytes functional descriptor (call management)
00D1 05              376           db   05H     ;; ",                 -- bLength = 5 bytes
00D2 24              377           db   24H     ;; ",                 -- bDescriptorType = CS_INTERFACE
00D3 01              378           db   01H     ;; ",                 -- bDescriptorSubType = Call Management
00D4 00              379           db   00H     ;; ",                 -- bmCapabilities = no call mgmnt
00D5 01              380           db   01H     ;; ",                 -- bDataInterface = 1
                     381           ;  -- 7 bytes endpoint descriptor (notify IN)
00D6 07              382           db   07H     ;; ",                 -- bLength = 7 bytes
00D7 05              383           db   05H     ;; ",                 -- bDescriptorType = endpoint descriptor
00D8 82              384           db   82H     ;; ",                 -- bEndpointAddress = IN 2
00D9 03              385           db   03H     ;; ",                 -- bmAttributes = interrupt data
00DA 08              386           db   08H; ", 
00DB 00              387               db   00H     ;; ",          -- wMaxPacketSize = 8 bytes
00DC 0F              388           db   0fH     ;; ",                 -- bInterval = 2**14 frames
                     389          ;   -- 9 bytes interface descriptor (data class)
                     390     
00DD 09              391           db   09H     ;; ",                 -- bLength = 9 bytes
00DE 04              392           db   04H     ;; ",                 -- bDescriptorType = interface descriptor
00DF 03              393           db   03H     ;; ",                 -- bInterfaceNumber = 1
00E0 00              394           db   00H     ;; ",                 -- bAlternateSetting = 0
00E1 02              395           db   02H     ;; ",                 -- bNumEndpoints = 2
00E2 0A              396           db   0aH     ;; ",                 -- bInterfaceClass = Data Interface
00E3 00              397           db   00H     ;; ",                 -- bInterfaceSubClass = none
00E4 01              398           db   01H     ;; ",                 -- bInterafceProtocol = none
00E5 00              399           db   00H     ;; ",                 -- iInterface = none
                     400               
                     401     ;       -- 7 bytes endpoint descriptor (data IN)
00E6 07              402           db   07H     ;; ",                 -- bLength = 7 bytes
00E7 05              403           db   05H     ;; ",                 -- bDescriptorType = endpoint descriptor
00E8 81              404           db   81H     ;; ",                 -- bEndpointAddress = IN 1
00E9 02              405           db   02H     ;; ",                 -- bmAttributes = bulk data
00EA 00              406           db   00H; ", 
00EB 02              407               db   02H     ;; ",          -- wMaxPacketSize = 512 bytes
00EC 00              408           db   00H     ;; ",                 -- bInterval
                     409         ;    -- 7 bytes endpoint descriptor (data OUT)
00ED 07              410           db   07H     ;; ",                 -- bLength = 7 bytes
00EE 05              411           db   05H     ;; ",                 -- bDescriptorType = endpoint descriptor
00EF 01              412           db   01H     ;; ",                 -- bEndpointAddress = OUT 1
00F0 02              413           db   02H     ;; ",                 -- bmAttributes = bulk data
00F1 00              414           db   00H  ; ", 
00F2 02              415               db   02H     ;; ",          -- wMaxPacketSize = 512 bytes
00F3 00              416           db   00H     ;; ",                 -- bInterval = never NAK
                     417     
                     418     
00F4                 419     HighSpeedConfigDscrEnd:   
                     420     
00F4 00              421     db    00h               ;; pad
                     422     
00F5                 423     FullSpeedConfigDscr:   
                     424     
00F5                 425     FullSpeedConfigDscrEnd:   
                     426     
00F5 00              427           db    00h               ;; pad
00F6                 428     StringDscr:
                     429     
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE     9

00F6                 430     StringDscr0:   
00F6 04              431           db   StringDscr0End-StringDscr0      ;; String descriptor length
00F7 03              432           db   DSCR_STRING
00F8 0904            433           db   09H,04H
00FA                 434     StringDscr0End:
                     435     
00FA                 436     StringDscr1:   
00FA 12              437           db   StringDscr1End-StringDscr1      ;; String descriptor length
00FB 03              438           db   DSCR_STRING
00FC 4800            439           db   'H',00
00FE 4400            440           db   'D',00
0100 4D00            441           db   'M',00
0102 4900            442           db   'I',00
0104 3200            443           db   '2',00
0106 5500            444           db   'U',00
0108 5300            445           db   'S',00
010A 4200            446           db   'B',00
010C                 447     StringDscr1End:
                     448     
010C                 449     StringDscr2:   
010C 0A              450           db   StringDscr2End-StringDscr2      ;; Descriptor length
010D 03              451           db   DSCR_STRING
010E 4A00            452           db   'J',00
0110 4100            453           db   'A',00
0112 4E00            454           db   'N',00
0114 4900            455           db   'I',00
0116                 456     StringDscr2End:
                     457     
0116 00              458     db 0
                     459     
0117                 460     UserDscr:      
0117 0000            461           dw   0000H
                     462           end
                                   
A51 MACRO ASSEMBLER  UVC_CDC                                                              01/25/2013 00:18:44 PAGE    10

SYMBOL TABLE LISTING
------ ----- -------


N A M E                 T Y P E  V A L U E   ATTRIBUTES

CSINTERFACEDSCR. . . .  C ADDR   0036H   R   SEG=DSCR
CSINTERFACEDSCREND . .  C ADDR   0054H   R   SEG=DSCR
CSVSINTERFACEDSCR. . .  C ADDR   005DH   R   SEG=DSCR
CSVSINTERFACEDSCREND .  C ADDR   0076H   R   SEG=DSCR
DEVICEDSCR . . . . . .  C ADDR   0000H   R   SEG=DSCR
DEVICEQUALDSCR . . . .  C ADDR   0012H   R   SEG=DSCR
DSCR . . . . . . . . .  C SEG    0119H       REL=PAGE
DSCR_CONFIG. . . . . .  N NUMB   0002H   A   
DSCR_CONFIG_LEN. . . .  N NUMB   0009H   A   
DSCR_DEVICE. . . . . .  N NUMB   0001H   A   
DSCR_DEVICE_LEN. . . .  N NUMB   0012H   A   
DSCR_DEVQUAL . . . . .  N NUMB   0006H   A   
DSCR_DEVQUAL_LEN . . .  N NUMB   000AH   A   
DSCR_ENDPNT. . . . . .  N NUMB   0005H   A   
DSCR_ENDPNT_LEN. . . .  N NUMB   0007H   A   
DSCR_INTRFC. . . . . .  N NUMB   0004H   A   
DSCR_INTRFC_LEN. . . .  N NUMB   0009H   A   
DSCR_STRING. . . . . .  N NUMB   0003H   A   
ET_BULK. . . . . . . .  N NUMB   0002H   A   
ET_CONTROL . . . . . .  N NUMB   0000H   A   
ET_INT . . . . . . . .  N NUMB   0003H   A   
ET_ISO . . . . . . . .  N NUMB   0001H   A   
FULLSPEEDCONFIGDSCR. .  C ADDR   00F5H   R   SEG=DSCR
FULLSPEEDCONFIGDSCREND  C ADDR   00F5H   R   SEG=DSCR
HIGHSPEEDCONFIGDSCR. .  C ADDR   001CH   R   SEG=DSCR
HIGHSPEEDCONFIGDSCREND  C ADDR   00F4H   R   SEG=DSCR
STRINGDSCR . . . . . .  C ADDR   00F6H   R   SEG=DSCR
STRINGDSCR0. . . . . .  C ADDR   00F6H   R   SEG=DSCR
STRINGDSCR0END . . . .  C ADDR   00FAH   R   SEG=DSCR
STRINGDSCR1. . . . . .  C ADDR   00FAH   R   SEG=DSCR
STRINGDSCR1END . . . .  C ADDR   010CH   R   SEG=DSCR
STRINGDSCR2. . . . . .  C ADDR   010CH   R   SEG=DSCR
STRINGDSCR2END . . . .  C ADDR   0116H   R   SEG=DSCR
USERDSCR . . . . . . .  C ADDR   0117H   R   SEG=DSCR


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
